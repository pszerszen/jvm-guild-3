<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>JVM Guild #3</title>

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="node_modules/firacode/distr/fira_code.css">
    <link rel="stylesheet" href="dist/custom.css">
    <link rel="stylesheet" href="dist/theme/league.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/zenburn.css">
    <script src="node_modules/jquery/dist/jquery.slim.min.js"></script>
</head>
<body>
<div class="reveal">
    <div class="slides">
        <section id="title">
            <img src="img/java.webp" alt="java-logo" class="r-stretch">
            <h1>JVM Guild #3</h1>
            <h2>JDK Features - 11 ➡ 21</h2>
            <br/>
            <h3>Piotr Szerszeń</h3>
        </section>
        <section id="agenda">
            <h2>Agenda</h2>
            <br/>
            <ol class="two-columns">
                <li>String</li>
                <li>Compact Number Format</li>
                <li>Switch-case</li>
                <li>Pattern matching</li>
                <li>Records</li>
                <li>Sealed types</li>
                <li>JavaDoc</li>
                <li>Network</li>
                <li>Multi-threading</li>
                <li>Scoped values</li>
                <li>Others...</li>
            </ol>
        </section>
        <section id="string">
            <h2>String</h2>
            <div class="r-stack">
                <div class="fragment fade-in-then-out">
                    <h3 class="method jdk-11">repeat()</h3>
                    <pre>
                    <code data-trim data-noescape>
                        strVar.repeat(2) ➡️ strVar + strVar
                    </code>
                    </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <h3 class="method jdk-11">isBlank()</h3>
                    <pre>
                    <code data-trim data-noescape data-line-numbers>
                        ✅ - "".isBlank()
                        ✅ - " ".isBlank()
                        ✅ - " \n ".isBlank()
                        ❌ - "some string".isBlank()
                    </code>
                </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <h3 class="method jdk-11">lines()</h3>
                    <pre>
                        <code data-trim data-noescape>
                            "foo\nbar\n\nfoo\nbar".lines() ➡️ Stream.of("foo","bar","","foo","bar")
                        </code>
                    </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <h3 class="method jdk-11">strip()</h3>
                    <pre>
                        <code data-trim data-noescape>
                            var s = "\t abc \n";
                            s.strip() == s.trim()
                        </code>
                    </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <h3 class="method jdk-11">strip()</h3>
                    <pre>
                        <code data-trim data-noescape>
                            var c = '\u2000';
                            var s = c + "abc" + c;
                            s.strip() != s.trim()
                        </code>
                    </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <h3 class="method jdk-11">stripLeading()</h3>
                    <pre>
                        <code data-trim data-noescape>
                            var s = "\t abc \n";
                            s.stripLeading() ➡️ "abc \n"
                        </code>
                    </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <h3 class="method jdk-11">stripTrailing()</h3>
                    <pre>
                        <code data-trim data-noescape>
                            var s = "\t abc \n";
                            s.stripTrailing() ➡️ "\t abc"
                        </code>
                    </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <h3 class="method jdk-12">transform()</h3>
                    <pre>
                        <code data-trim data-noescape>
                            "hello".transform(input -> input + " world!") ➡️ "hello world!"
                        </code>
                    </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <h3 class="method jdk-12">indent()</h3>
                    <pre>
                        <code data-trim data-noescape>
                            var multiline = "This is\na multiline\nstring.";
                            var indented = "  This is\n  a multiline\n  string.";
                            multiline.indent(2) ➡️ indented
                            indented.indent(-2) ➡️ multiline
                            indented.indent(-999) ➡️ multiline
                        </code>
                    </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <h3 class="method jdk-15">TEXT BLOCK</h3>
                    <pre>
                        <code data-trim data-noescape>
                            <script type="text/template">
                            String html = """
                            <html>
                                    <body>
                                        <p class="greeting">Hello, world</p>
                                    </body>
                                </html>
                            """;
                            </script>
                        </code>
                    </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <h3 class="method jdk-15">TEXT BLOCK</h3>
                    <pre>
                        <code data-trim data-noescape>
                            String query = """
                                SELECT "EMP_ID", "LAST_NAME" FROM "EMPLOYEE_TB"
                                WHERE "CITY" = 'INDIANAPOLIS'
                                ORDER BY "EMP_ID", "LAST_NAME";
                                """;
                        </code>
                    </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <h3 class="method jdk-15">TEXT BLOCK</h3>
                    <pre>
                        <code data-trim data-noescape>
                            String code = """
                                String text = \"""
                                    A text block inside a text block
                                \""";
                                """;
                        </code>
                    </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <h3 class="method jdk-15">TEXT BLOCK</h3>
                    <pre>
                        <code data-trim data-noescape>
                            String oneLine = """
                                Lorem ipsum dolor sit amet, consectetur adipiscing \
                                elit, sed do eiusmod tempor incididunt ut labore \
                                et dolore magna aliqua.\
                                """;
                        </code>
                    </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <h3 class="method jdk-15">formatted()</h3>
                    <pre>
                        <code data-trim data-noescape>
                            String template = """
                               {
                                 "firstName": "%s",
                                 "lastName": "%s",
                                 "age": "%d"
                               }""";

                            template.formatted("John", "Doe", 21)
                                            ⬇️
                            String.format(template, "John", "Doe", 21)
                        </code>
                    </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <h3 class="method jdk-15">stripIndent()</h3>
                    <pre>
                        <code data-trim data-noescape>
                            String template = """
                               {
                                 "firstName": "%s",
                                 "lastName": "%s",
                                 "age": "%d"
                               }""";

                            """
                                 {
                                   "name": "%s",
                                   "lastName": "%s",
                                   "age": "%d"
                                 }""".stripIndent() ➡️ template
                        </code>
                    </pre>
                </div>
            </div>
        </section>
        <section id="compact-number-format">
            <h2 class="method jdk-12">CompactNumberFormat</h2>
            <div class="r-stack">
                <div class="fragment fade-in-then-out">
                    <pre>
                    <code data-trim data-noescape>
                        var numberFormat = CompactNumberFormat.getCompactNumberInstance(
                                Locale.ENGLISH, Style.SHORT);
                        numberFormat.format(x);

                              x ➡️ output
                            100 ➡️ "100"
                           1000 ➡️ "1K"
                         100000 ➡️ "100K"
                        1000000 ➡️ "1M"
                    </code>
                    </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <pre>
                    <code data-trim data-noescape>
                        var numberFormat = CompactNumberFormat.getCompactNumberInstance(
                                Locale.of("pl", "PL"), Style.LONG);
                        numberFormat.format(x);

                              x ➡️ output
                            100 ➡️ "100"
                           1000 ➡️ "1 tysiąc"
                         100000 ➡️ "100 tysięcy"
                        1000000 ➡️ "1 milion"
                    </code>
                    </pre>
                </div>
            </div>
        </section>
        <section id="switch-case">
            <h2 class="method jdk-14">switch-case</h2>
            <div class="r-stack">
                <div class="fragment fade-in-then-out">
                    <h3>Old style</h3>
                    <pre>
                    <code data-trim data-noescape>
                        int value;
                        switch (day) {
                        case MONDAY:
                        case FRIDAY:
                        case SUNDAY:
                            value = 6;
                            break;
                        case TUESDAY:
                            value = 7;
                            break;
                        case THURSDAY:
                        case SATURDAY:
                            value = 8;
                            break;
                        case WEDNESDAY:
                            value = 9;
                            break;
                        default:
                            throw new IllegalStateException("What: " + day);
                    </code>
                    </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <h3>yield</h3>
                    <pre>
                    <code data-trim data-noescape>
                    int value = switch (day) {
                        case MONDAY, FRIDAY, SUNDAY:
                            yield 6;
                        case TUESDAY:
                            yield 7;
                        case THURSDAY, SATURDAY:
                            yield 8;
                        case WEDNESDAY:
                            yield 9;
                    };
                    </code>
                    </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <h3>lambda</h3>
                    <pre>
                    <code data-trim data-noescape>
                    int value = switch (day) {
                        case MONDAY, FRIDAY, SUNDAY -> 6;
                        case TUESDAY -> 7;
                        case THURSDAY, SATURDAY -> 8;
                        case WEDNESDAY -> 9;
                    };
                    </code>
                    </pre>
                </div>
            </div>
        </section>
        <section id="pattern-matching">
            <h2>Pattern Matching</h2>
            <div class="r-stack">
                <div class="fragment fade-in-then-out">
                    <h3>if-instanceof</h3>
                    <h4>old way</h4>
                    <pre>
                    <code data-trim data-noescape>
                    <script type="text/template">
                    if (o instanceof Collection) {
                        Collection<?> c = (Collection<?>) o;
                        // process collection
                    } else if (o instanceof Map) {
                        Map<?, ?> m = (Map<?, ?>) o;
                        // process map
                    } else {
                        // process object
                    }
                    </script>
                    </code>
                    </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <h3 class="method jdk-16">if-instanceof</h3>
                    <h4>new way</h4>
                    <pre>
                    <code data-trim data-noescape>
                    <script type="text/template">
                    if (o instanceof Collection<?> c) {
                        // process collection
                    } else if (o instanceof Map<?, ?> m) {
                        // process map
                    } else {
                        // process object
                    }
                    </script>
                    </code>
                    </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <h3 class="method jdk-17">switch</h3>
                    <pre>
                    <code data-trim data-noescape>
                    var msg = switch (shape) {
                        case Circle c -> "Circle: " + c;
                        case Rectangle r -> "Rectangle: " + r;
                        case Square s -> "Square: " + s;
                        default -> "Something else";
                    };
                    </code>
                    </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <h3 class="method jdk-19">records</h3>
                    <pre>
                    <code data-trim data-noescape>
                    if (object instanceof Location(var name, var gpsPoint)) {
                        // name and gpsPoint processable from here
                    }
                    </code>
                    </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <h3 class="method jdk-19">records (deep)</h3>
                    <pre>
                    <code data-trim data-noescape>
                    if (object instanceof Location(var name, GPSPoint(var lat, var lng))) {
                        // name, lat and lng processable from here
                    }
                    </code>
                    </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <h3 class="method jdk-19">records in switch</h3>
                    <pre>
                    <code data-trim data-noescape>
                    <script type="text/template">
                    val result = switch (object) {
                        case Location(var name, var ignored)
                            when name.equals("Home") -> "Test";
                        case Location(var name, var ignored) -> name;
                        case LocationWrapper<?>(Location(var name,
                                                         GPSPoint(var lat,
                                                                  var lng)),
                                                var description)
                            when description.equals("Description") -> name;
                        case LocationWrapper<?>(Location(var name,
                                                         GPSPoint(var lat,
                                                                  var lng)),
                                             var description) -> description;
                        case GPSPoint(var lat, var lon) -> String.valueOf(lat);
                        default -> "default";
                    };
                    </script>
                    </code>
                    </pre>
                </div>
            </div>
        </section>
        <section id="records">
            <h2 class="method jdk-16">Records</h2>
            <div class="r-stack">
                <div class="fragment fade-in-then-out">
                    <h3>Specifications:</h3>
                    <ul>
                        <li>final class</li>
                        <li>all fields are private final</li>
                        <li>automatically has "getters" for all the fields</li>
                        <li>automatically has equals(), hashCode() and toString()</li>
                    </ul>
                </div>
                <div class="fragment fade-in-then-out">
                    <pre>
                    <code data-trim data-noescape>
                    <script type="text/template">
                    record GPSPoint(double lat, double lng) {}
                    record Location(String name, GPSPoint gpsPoint) {}
                    record LocationWrapper<T>(T t, String description) {}
                    </script>
                    </code>
                    </pre>
                </div>
                <div class="fragment fade-in-then-out">
                    <pre>
                    <code data-trim data-noescape>
                    <script type="text/template">
                    record Range(int lo, int hi) {

                        public Range {
                            if (lo > hi) {
                                throw new IllegalArgumentException(
                                        "(%d,%d)".formatted(lo, hi));
                            }
                        }
                    }
                    </script>
                    </code>
                    </pre>
                </div>
            </div>
        </section>
        <section id="sealed-types"></section>
        <section id="java-doc"></section>
        <section id="network"></section>
        <section id="multi-threading"></section>
        <section id="scoped-values"></section>
        <section id="others"></section>
    </div>
</div>

<script src="dist/reveal.js"></script>
<script src="plugin/notes/notes.js"></script>
<script src="plugin/markdown/markdown.js"></script>
<script src="plugin/highlight/highlight.js"></script>
<script>
    // More info about initialization & config:
    // - https://revealjs.com/initialization/
    // - https://revealjs.com/config/
    Reveal.initialize({
        hash: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
    });
</script>
</body>
</html>
